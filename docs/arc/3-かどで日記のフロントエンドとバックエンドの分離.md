# ADR 3 : かどで日記のフロントエンドとバックエンドの分離

<!-- ADR ナンバー : タイトル -->

## Status :🟡 提案

<!--
※ここから選んでステータスの横に貼っ付ける
🟡提案
🟢承認
🔴廃止
-->

## Context

<!--
問題の背景や定義
事実だけを描く
-->

現状直接レンダリングしてフロントエンドを生成している。

## Decision

<!-- 提案、すること -->

かどで日記のフロントエンドとバックエンドを分離する。
用いる技術は Next.js。

理由としては技術が安定してきており、企業での採用事例も増えているため。

もともと意図的にフロントエンドとバックエンドを分離してきた。
これは長期的な管理のコストを減らすためだったが、やはり DOM 操作で管理するモダンフロントエンドを使いたい節がある。

## Consequences

<!-- Decisionによって得られるもの -->

### Pros

-   今後フロントエンドの付け替えが容易になる
-   フロントエンドとバックエンドの開発が分離できる
-   アプリ対応などが容易になる
-   DOM 操作になるため、通信量を節約できる

### Cons

-   開発工数増える
-   相当な大改修が必要
-   認証周りが面倒

## Notes

Vercel には依存したくないので、Next.js を他のところで動かしたいが、やはり Vercel に最適化された FW。

Deno を使う手もあるが、まだ成熟していない感が否めない。
もうちょっと枯れた技術を使いたい

レンダリングは CSR がよいかも。殆どのページが個人由来なので、キャッシュ周りの効果薄い。  
トップページとかは SSG でいいかも。

## References
